$(document).ready(function(){function e(e,t){var a=$("#"+t);if(e>=8){if(c[t])return;a.removeAttr("disabled"),a.toggleClass("button-disabled"),c[t]=!0}else c[t]&&(a.prop("disabled",!0),a.hasClass("button-on")&&a.trigger("click"),a.toggleClass("button-disabled"),c[t]=!1)}function t(e,t){if(!r[e]){for(var a=t.length,o=0;o<a;o++)$("#"+t[o]).rangeSlider({bounds:{min:1,max:10},step:1,defaultValues:{min:1,max:4}});r[e]=!0}}function a(e,t,a,o,n){var i=e.data("switch");if(e.data("switch","on"==i?"off":"on"),"off"==i){var l=t.currentTarget.offsetTop,s=t.currentTarget.offsetLeft+t.currentTarget.offsetWidth+5;hotplace.dom.openLayer(a,{top:l,left:s}),o&&o()}else hotplace.dom.closeLayer(a),n&&n();e.toggleClass("button-on")}function o(){$("#newsTicker li:first").slideUp(function(){$(this).appendTo($("#newsTicker")).slideDown()})}function n(e){for(var t=e.length,a=hotplace.dom,o=0;o<t;o++)if(""==$(e[o]).val())return a.openTooltip(e[o]),!1;return!0}var i,l=hotplace.dom,s=($("body").data("mtype"),{type:"N",si:"",gugun:"",region:"",detail:"",rdoId:"rdoN",san:"1",beonjiF:"",beonjiS:""}),d={type:"N",si:"",gugun:"",region:"",detail:"",rdoId:"rdoNradius",san:"1",beonjiF:"",beonjiS:""},r={},c={};!function(){var e=hotplace.dom.getTemplate("searchForm");$("#dvAddrSearch").append(e())}(),function(){var e=hotplace.dom.getTemplate("salesViewForm");$("#dvSalesView").append(e())}(),$('#dvAddrSearch a[data-toggle="tab"]').on("shown.bs.tab",function(e){"#tabDetailSearch"==$(e.target).attr("href")&&t("tabDetailSearch",["sliderRQ","sliderCon","sliderDev","sliderRealWidth","sliderRealPrice","sliderPop","sliderDevWidth","sliderParcel","sliderSales"]),hotplace.dom.closeAllTooltip(".htooltip")}),$("#addrType, #addrTypeRadius").on("click",function(e){var t="addrType"==e.currentTarget.id?s:d;t.type=$(e.target).data("type"),t.si="",t.gugun="",t.rdoId=$(e.target).data("rdo")}),$("#selNsido, #selNsidoRadius").on("change",function(e){var t,a,o=e.currentTarget.id;hotplace.dom.closeTooltip("#"+o),"selNsido"==o?(t=s,a="#selNgugun"):(t=d,a="#selNgugunRadius"),t.si=$(this).val(),t.gugun="",t.si?hotplace.getPlainText("address/condition",t,function(e){$(a).html(l.getSelectOptions(e,"시군구"))},!1):$(a).html(l.getSelectOptions([],"시군구"))}),$("#selNgugun, #selNgugunRadius").on("change",function(e){var t,a,o=e.currentTarget.id;hotplace.dom.closeTooltip("#"+o),"selNgugun"==o?(t=s,a="#selName"):(t=d,a="#selNameRadius"),t.gugun=$(this).val(),t.region="",t.gugun?hotplace.getPlainText("address/condition",t,function(e){$(a).html(l.getSelectOptions(e,"지역명"))},!1):$(a).html(l.getSelectOptions([],"지역명"))}),$("#selName, #selNameRadius").on("change",function(e){var t=e.currentTarget.id,a="selName"==t?s:d;hotplace.dom.closeTooltip("#"+t),a.region=$(this).val()}),$("#chkSan, #chkSanRadius").on("change",function(e){var t=e.currentTarget,a="chkSan"==t.id?s:d;t.checked?a.san="2":a.san="1"}),$("#btnNsearch, #btnNsearchRadius").on("click",function(e){var t,a,o,i;"btnNsearch"==e.currentTarget.id?(a="#dvNresult",i="#btnViewMapAddress",o=["#selNsido","#selNgugun","#selName"],(t=s).beonjiF=$("#beonjiF").val(),t.beonjiS=$("#beonjiS").val()):(a="#dvNresultRadius",i="#btnViewMapAddressRadius",o=["#selNsidoRadius","#selNgugunRadius","#selNameRadius"],(t=d).beonjiF=$("#beonjiFradius").val(),t.beonjiS=$("#beonjiSradius").val()),hotplace.dom.closeTooltip(i),n(o)&&hotplace.getPlainTextFromJson("address/search",JSON.stringify(t),function(e){var o=$(a),n={addresses:e,rdoId:t.rdoId},i=l.getTemplate("addressResult")(n);o.html(i)},!0,"#dvAddrSearch")}),$("#btnViewMapAddress, #btnViewMapAddressRadius").on("click",function(e){var t=e.currentTarget.id,a="btnViewMapAddress"==t?s:d,o=$('input:radio[name="'+a.rdoId+'"]:checked'),n=o.data("lng"),i=o.data("lat"),l=o.data("address"),r=0;l?("btnViewMapAddressRadius"==t&&(r=$('input:radio[name="radioRadius"]:checked').val()),hotplace.maps.destroyMarkerWindow(hotplace.maps.MarkerType.RADIUS_SEARCH),hotplace.maps.panToBounds(i,n,null,function(){hotplace.maps.destroyMarkerType(hotplace.maps.MarkerType.RADIUS_SEARCH),hotplace.maps.getMarker(hotplace.maps.MarkerType.RADIUS_SEARCH,i,n,{click:function(e,t,a){a.getMap()?a.close():a.open(e,t)}},{hasInfoWindow:!0,infoWinFormName:"pinpointForm",radius:r,datas:{content:l}})})):hotplace.dom.openTooltip("#"+t)}),$("#btnCapture").on("click",function(e){e.preventDefault(),hotplace.dom.captureToCanvas()});var p=3,u=3;hotplace.maps.init("naver",{X:127.9204629,Y:36.0207091,level:3},{zoom_changed:function(t,a){u=a,hotplace.dom.addBodyAllMask(),setTimeout(function(){hotplace.maps.showCellLayer(),hotplace.dom.removeBodyAllMask(),e(a,"btnSalesView")},500)},zoom_start:function(e,t){p=t,hotplace.maps.destroyMarkers(),hotplace.maps.destroyMarkerWindow(hotplace.maps.MarkerType.RADIUS_SEARCH)},dragend:function(e,t){hotplace.maps.isInLocationBounds(t)?hotplace.maps.appendCell():hotplace.maps.showCellLayer()},click:function(e,t){hotplace.maps.getClickedCell(t)}},function(e){hotplace.maps.showCellLayer(),hotplace.dom.showYearRangeDiv()}),hotplace.dom.addButtonInMap([{id:"btnNews",glyphicon:"list-alt",attr:'data-switch="off" title="뉴스"',clazz:"mBtnTooltip",callback:function(e){a($(this),e,"dvNews",function(){setTimeout(function e(){o(),i=setTimeout(e,3e3)},3e3)},function(){clearTimeout(i)})}},{id:"btnAddrSearch",glyphicon:"search",attr:'data-switch="off" title="주소,상세,반경검색"',clazz:"mBtnTooltip",callback:function(e){a($(this),e,"dvAddrSearch")}},{id:"btnUser",glyphicon:"user",callback:function(){hotplace.dom.captureToCanvas()}},{id:"btnInfo",glyphicon:"info-sign",attr:'data-switch="off"',callback:function(e){hotplace.test.searchRadius()}},{id:"btnSalesView",glyphicon:"check",attr:'data-switch="off" title="물건보기"',disabled:!0,clazz:"mBtnTooltip",callback:function(e){a($(this),e,"dvSalesView")}},{id:"btnCadastral",attr:'data-switch="off" title="지적도 보기"',glyphicon:"globe",clazz:"mBtnTooltip",callback:function(){var e=$(this).data("switch");hotplace.maps.showJijeokLayer(e,$(this)),$(this).toggleClass("button-on")}}]),hotplace.validation.numberOnly(".numberOnly"),hotplace.dom.initTooltip("htooltip"),hotplace.dom.initTooltip("mBtnTooltip",{side:"right",trigger:"hover"}),hotplace.dom.initAutoYearRangeDiv()});