!function(e,t){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var a=t("body").data("url");t.browser={},t.browser.msie=!1,t.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(t.browser.msie=!0,t.browser.version=RegExp.$1),String.prototype.format=function(){for(var e=this,t=arguments.length;t--;)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t]);return e},e.isSupport=function(e,n){return t.inArray(e,n)>-1},e.ajax=function(n){var o=e.dom;t.ajax(a+n.url,{async:null==n.async||n.async,beforeSend:function(e){(void 0==n.activeMask||n.activeMask)&&o.showMask(n.loadEl,n.loadMsg),n.beforeSend&&"function"==typeof n.beforeSend&&n.beforeSend()},contentType:n.contentType||"application/x-www-form-urlencoded; charset=UTF-8",dataType:n.dataType||"json",method:n.method||"POST",context:n.context||document.body,data:n.data,statusCode:{404:function(){}},success:function(e,t,a){if(!n.success||"function"!=typeof n.success)throw new Error("success function not defined");try{n.success(e,t,a)}finally{(void 0==n.activeMask||n.activeMask)&&o.hideMask()}},error:function(e,t,a){n.error&&"function"==typeof n.error&&n.error(e,t,a),(void 0==n.activeMask||n.activeMask)&&o.hideMask()},timeout:n.timeout||3e4})},e.getPlainText=function(n,a,o,r){e.ajax({url:n,method:"GET",dataType:"text",data:a||{},activeMask:void 0==r||r,success:function(e,n,a){var r=t.parseJSON(e);o(r)},error:function(){}})},e.getPlainTextFromJson=function(n,a,o){e.ajax({url:n,method:"POST",dataType:"text",contentType:"application/json; charset=UTF-8",data:a||{},success:function(e,n,a){var r=t.parseJSON(e);o(r)},error:function(){}})},e.createUuid=function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}}(window.hotplace=window.hotplace||{},jQuery),function(e,t){function n(){var e=null;switch(f){case"daum":e=w.getBounds(),x={swx:e.ba,swy:e.ha,nex:e.fa,ney:e.ga};break;case"naver":e=w.getBounds(),x={swx:e._sw.x,swy:e._sw.y,nex:e._ne.x,ney:e._ne.y}}var t=parseFloat((x.nex-x.swx)/8);b.swx=x.swx-t,b.swy=x.swy-t,b.nex=x.nex+t,b.ney=x.ney+t}function a(){var e=null,t=null;switch(f){case"daum":t={swx:(e=w.getBounds()).ba,swy:e.ha,nex:e.fa,ney:e.ga};break;case"naver":t={swx:(e=w.getBounds())._sw.x,swy:e._sw.y,nex:e._ne.x,ney:e._ne.y}}var n=parseFloat((t.nex-t.swx)/2);k.swx=t.swx-n,k.swy=t.swy-n,k.nex=t.nex+n,k.ney=t.ney+n}function o(){var e=-1;switch(f){case"daum":e=w.getLevel();break;case"naver":e=w.getZoom()}return e}function r(e){var t=Math.ceil(e);return t<=50?"rgba(255,255,255,0.0)":t>50&&t<=75?"rgb(255,255,0)":t>75&&t<=90?"rgb(255,150,0)":"rgb(255,0,0)"}function i(e,t,n,a,o,r,i){var l=null;switch(f){case"daum":break;case"naver":(l=new g.Rectangle({map:w,bounds:new g.LatLngBounds(new g.LatLng(e,t),new g.LatLng(n,a)),strokeWeight:o&&void 0!=o.strokeWeight?o.strokeWeight:0,strokeColor:o&&void 0!=o.strokeColor?o.strokeColor:"#5347AA",strokeOpacity:o&&void 0!=o.strokeOpacity?o.strokeOpacity:.5,fillColor:o&&void 0!=o.fillColor?o.fillColor:"rgb(255,051,000)",fillOpacity:o&&void 0!=o.fillOpacity?o.fillOpacity:.1,clickable:!0})).data=r,v.addListener(l,"click",function(e){var t=e.overlay,n=new g.LatLng(t.data.location[5],t.data.location[4]);hotplace.dom.openInfoWndowForCell(w,n,g,v,{weight:t.data.weight},{open:function(e,t){}}),hotplace.ajax({url:"sample/celldetail",method:"GET",dataType:"json",data:{},loadEl:"#dvCellDetail",success:function(e,t,n){hotplace.dom.createChart("canvas")},error:function(){}})}),i&&v.trigger(l,"click")}return l}function l(e,t){for(var n=hotplace.database.getLevelData(e),a=hotplace.database.getLevelLogMap(e),o=n.length,l=b.nex,c=b.swy,s=b.ney,u="",d=t;d<o&&!(n[d].location[0]>l);d++){var p=n[d].location[1];if(p>=c&&p<=s&&(!(u=n[d].id)||!a[u])){if(n[d].id=hotplace.createUuid(),a[n[d].id]=!0,0,Math.ceil(n[d].weight)<=50){M.push(n[d]);continue}C.push(i(n[d].location[1],n[d].location[0],n[d].location[3],n[d].location[2],{fillColor:r(n[d].weight),fillOpacity:.5},n[d]))}}}function c(){for(var e=C.length-1;e>=0;e--)C[e]&&(C[e].setMap(null),delete C[e])}function s(e,t){var a;switch(e){case"zoom_changed":n(),a=o();break;case"zoom_start":a=w.getLevel();break;case"zooming":a=w.getZoom();break;case"dragend":n(),a=x;break;case"click":a="naver"==f?{x:t.latlng.x,y:t.latlng.y}:{x:t.latLng.gb,y:t.latLng.hb};break;case"tilesloaded":a={}}return a}function u(){"naver"==f&&(g._cadastralLayer=new g.CadastralLayer)}function d(){var e=hotplace.database,t=o();e.hasData(t)&&l(t,e.getStartXIdx(b.swx,t))}function p(e){c(),a(),M=[],hotplace.dom.closeInfoWndowForCell(),hotplace.database.initLevel(e)}var f="",h=document.getElementById("map"),g=null,w=null,v=null,y=!1,m=["zoom_changed","bounds_changed","dragend","zoom_start","click","tilesloaded"],g=["naver","daum"],x={swy:0,swx:0,ney:0,nex:0},b={swy:0,swx:0,ney:0,nex:0},k={swy:0,swx:0,ney:0,nex:0},L={heat:"off",cell:"off",jijeok:"off"},C=[],M=[],T=[],B=[],S=[];e.getClickedCell=function(e){for(var t=M.length,n=0,a=0,o=0,r=0,l=0;l<t;l++)if(n=M[l].location[0],o=M[l].location[2],a=M[l].location[1],r=M[l].location[3],e.x>=n&&e.x<=o&&e.y>=a&&e.y<=r){C.push(i(a,n,r,o,{fillColor:"rgba(255,255,255,0.0)",fillOpacity:.1},M[l],!0)),M.slice(l,1);break}},e.getVender=function(){return g},e.getVenderMap=function(){return w},e.getCurrentLevel=function(){return o()},e.event={addListener:function(e,t,n){if(!hotplace.isSupport(e,m))throw new Error("["+e+" 는(은) 지원하지 않습니다](supported : zoom_changed, bounds_changed");var a;switch(f){case"naver":case"daum":a=v.addListener}"zoom_start"==e&&(e="naver"==f?"zooming":"zoom_start"),a(w,e,function(e){return function(n){var a=s(e,n);t(w,a)}}(e))}},e.init=function(t,a,o,r){if(y)throw new Error("init 함수는 이미 호출 되었습니다");if(!hotplace.isSupport(t,g))throw new Error("["+t+"는(은) 지원하지 않습니다](supported : naver, daum");switch(f=t,y=!0,t){case"naver":g=naver.maps,v=g.Event,w=new g.Map(h,{center:new g.LatLng(a.Y,a.X),zoom:a.level,mapTypeControl:!0,mapTypeControlOptions:{style:g.MapTypeControlStyle.DROPDOWN}});break;case"daum":g=daum.maps,v=daum.maps.event,w=new g.Map(h,{center:new g.LatLng(a.Y,a.X),level:a.level})}if(n(),u(),o)for(var i in o)e.event.addListener(i,o[i]);r&&r(w)},e.panToBounds=function(e,t,n,a){n=n||.01,"naver"==f?w.panToBounds(new g.LatLngBounds(new g.LatLng(e-n,t-n),new g.LatLng(e+n,t+n))):"daum"==f&&w.panTo(new g.LatLngBounds(new g.LatLng(e-n,t-n),new g.LatLng(e+n,t+n))),a()},e.getMarker=function(e,t,n,a){var o=new g.Marker({position:new g.LatLng(e,t),map:w}),r=new g.InfoWindow({content:'<div style="width:150px;text-align:center;padding:10px;">'+a+"</div>"});if(T.push(o),B.push(r),n)for(var i in n)v.addListener(o,i,function(e,t){return function(a){n[e](w,o,t)}}(i,r))},e.drawBounds=function(){0!=S.length&&(S[0].setMap(null),S[1].setMap(null),S[2].setMap(null),S=[]),S.push(i(x.swy,x.swx,x.ney,x.nex,{strokeColor:"#5347AA",strokeWeight:2,fillColor:"#BBBBBB",fillOpacity:.1})),S.push(i(b.swy,b.swx,b.ney,b.nex,{strokeColor:"#5347AA",strokeWeight:2,fillColor:"#EEEEEE",fillOpacity:.1})),a(),S.push(i(k.swy,k.swx,k.ney,k.nex,{strokeColor:"#5347AA",strokeWeight:2,fillColor:"#CCCCCC",fillOpacity:.1}))},e.appendCell=function(){var e=hotplace.database,t=o();e.hasData(t)&&l(t,e.getStartXIdx(b.swx,t))},e.isInLocationBounds=function(e){return!(k.swx>e.swx||k.nex<e.nex||k.swy>e.swy||k.ney<e.ney)},e.showCellsLayer=function(){var e=hotplace.database,t=o();w&&(p(t),hotplace.getPlainText("locationbounds",{level:t,swx:k.swx,nex:k.nex,swy:k.swy,ney:k.ney},function(n){try{e.setLevelData(t,n.datas),d()}catch(e){throw e}}))},e.showJijeokLayer=function(e,t){"on"==e?("naver"==f?g._cadastralLayer.setMap(null):"daum"==f&&w.removeOverlayMapTypeId(g.MapTypeId.USE_DISTRICT),t.data("switch","off"),L.jijeok="off"):"off"==e&&("naver"==f?g._cadastralLayer.setMap(w):"daum"==f&&w.addOverlayMapTypeId(g.MapTypeId.USE_DISTRICT),t.data("switch","on"),L.jijeok="on")}}(hotplace.maps=hotplace.maps||{},jQuery),function(e,t){function n(e,t,n,a){var o="",i="",l=a||"로딩 중입니다",c="";switch(t){case 1:i="",c="vertical",o="25px";break;case 2:l="",i=30,c="vertical";break;case 3:i=30,c="horizontal",o="18px"}(r=e).waitMe({effect:n,text:l,bg:"rgba(255,255,255,0.4)",color:"#000",maxSize:i,source:"img.svg",textPos:c,fontSize:o,onClose:function(){}})}function a(){t('input[type="checkbox"]').bootstrapToggle()}function o(t,n,a,o){var r=e.getTemplate("cellForm");if(s=new t.InfoWindow({content:r(a),borderWidth:1}),o)for(var i in o)n.addListener(s,i,function(e,t){return function(n){o[e](t,n)}}(i,s));return s}var r,i={bounce:"bounce",rotateplane:"rotateplane",stretch:"stretch",orbit:"orbit",roundBounce:"roundBounce",win8:"win8",win8_linear:"win8_linear",ios:"ios",facebook:"facebook",rotation:"rotation",timer:"timer",pulse:"pulse",progressBar:"progressBar",bouncePulse:"bouncePulse"},l=t("#mapButtons"),c={},s=null;e.openInfoWndowForCell=function(n,a,r,i,l,c){o(r,i,l,c).open(n,a);var s=t._data(document.getElementById("btnCellClose"),"events");s&&s.click||t("#btnCellClose").on("click",function(t){e.closeInfoWndowForCell()})},e.closeInfoWndowForCell=function(){s&&(s.close(),s=null)},e.createChart=function(e){var t=document.getElementById(e);new Chart(t,{type:"horizontalBar",data:{labels:["Africa","Asia"],datasets:[{label:"Population (millions)",backgroundColor:["#3e95cd","#8e5ea2"],data:[2478,5267]}]},options:{legend:{display:!1},title:{display:!0,text:"Predicted world population (millions) in 2050"}}})},e.showMask=function(e,a){n(e=t(e?e:"body"),1,i.timer,a)},e.hideMask=function(){r.waitMe("hide")},e.closeBootstrapModal=function(e){t(e).modal("toggle")},e.getTemplate=function(e){if(void 0===c[e]){hotplace.ajax({url:"resources/templates/"+e+".handlebars",async:!1,dataType:"html",method:"GET",activeMask:!1,success:function(t,n,a){c[e]=Handlebars.compile(t)},error:function(){throw new Error("html template error")}})}return c[e]},e.getSelectOptions=function(e,t){for(var n=e.length,a='<option value="">- '+t+"  -</option>",o=0;o<n;o++)a+='<option value="'+e[o][0]+'">'+e[o][1]+"</option>";return a},e.addButtonInMap=function(e){if(e){for(var n=e.length,o="",r=0;r<n;r++)o+=function(e){return void 0==e?'<button id="{0}" type="button" class="btn btn-default" data-toggle="buttons" {1}>{2}</button>':'<input type="checkbox" data-toggle="toggle" id="{0}" {1}>{2}'}(e[r].type).format(e[r].id,e[r].dataAttr,e[r].title);if(o){l.html(o);for(r=0;r<n;r++)t("#"+e[r].id).on(void 0==e[r].type?"click":"change",e[r].callback);a()}}}}(hotplace.dom=hotplace.dom||{},jQuery),function(e,t){var n={};e.isCached=function(e){return!!n[e]},e.getStartXIdx=function(t,a,o,r){var i=n[a].data;o=void 0==o?0:o;var l=(r=void 0==r?i.length-1:r)-o,c=o+Math.floor(l/2),s=i[c].location[0];return s==t?c:l<5?o:s>t?e.getStartXIdx(t,a,0,c):e.getStartXIdx(t,a,c,r)},e.setLevelData=function(e,t){n[e]={},n[e].data=t,n[e].log={}},e.hasData=function(e){return!!(n[e]&&n[e].data&&n[e].data.length>0)},e.getLevelData=function(e){return n[e]?n[e].data:null},e.getLevelLogMap=function(e){return n[e].log},e.initLevel=function(e){n[e]&&(n[e]=null)}}(hotplace.database=hotplace.database||{},jQuery),function(e,t){var n={};e.showMarker=function(){var e=hotplace.maps.getVender(),a=hotplace.maps.getVenderMap(),o=hotplace.maps.getCurrentLevel(),r=hotplace.database.getLevelData(o);if(null!=r)if(n[o]||(n[o]=[]),0==n[o].length)for(var i=0;i<r.length;i++)n[o].push(new e.Marker({position:new e.LatLng(r[i].location[1],r[i].location[0]),map:a}));else t.each(n[o],function(e,t){t.setMap(a)})},e.hideMarker=function(){var e=hotplace.maps.getCurrentLevel();n[e]&&t.each(n[e],function(e,t){t.setMap(null)})},e.initMarker=function(t){e.hideMarker(),n[t]=[]}}(hotplace.test=hotplace.test||{},jQuery);