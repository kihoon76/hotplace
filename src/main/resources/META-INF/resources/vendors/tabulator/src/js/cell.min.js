"use strict";var CellComponent=function(t){return{getValue:function(){return t.getValue()},getOldValue:function(){return t.getOldValue()},getElement:function(){return t.getElement()},getRow:function(){return t.row.getComponent()},getData:function(){return t.row.getData()},getField:function(){return t.column.getField()},getColumn:function(){return t.column.getComponent()},setValue:function(e,l){void 0===l&&(l=!0),t.setValue(e,l)},edit:function(){t.edit()},nav:function(){return t.nav()},checkHeight:function(){t.checkHeight()},_getSelf:function(){return t}}},Cell=function(t,e){this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.oldValue=null,this.height=null,this.width=null,this.minWidth=null,this.build()};Cell.prototype.build=function(){this.generateElement(),this.setWidth(this.column.width),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data))},Cell.prototype.generateElement=function(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=$(this.element)},Cell.prototype._configureCell=function(){var t,e,l,n=this,i=n.column.cellEvents,o=n.element,s=this.column.getField();o[0].style.textAlign=n.column.hozAlign,s&&o.attr("tabulator-field",s),n.column.definition.cssClass&&o.addClass(n.column.definition.cssClass),i.cellClick&&n.element.on("click",function(t){i.cellClick(t,n.getComponent())}),i.cellDblClick&&n.element.on("dblclick",function(t){i.cellDblClick(t,n.getComponent())}),i.cellContext&&n.element.on("contextmenu",function(t){i.cellContext(t,n.getComponent())}),i.cellTap&&(l=!1,n.element.on("touchstart",function(t){l=!0}),n.element.on("touchend",function(t){l&&i.cellTap(t,n.getComponent()),l=!1})),i.cellDblTap&&(t=null,n.element.on("touchend",function(e){t?(clearTimeout(t),t=null,i.cellDblTap(e,n.getComponent())):t=setTimeout(function(){clearTimeout(t),t=null},300)})),i.cellTapHold&&(e=null,n.element.on("touchstart",function(t){clearTimeout(e),e=setTimeout(function(){clearTimeout(e),e=null,l=!1,i.cellTapHold(t,n.getComponent())},1e3)}),n.element.on("touchend",function(t){clearTimeout(e),e=null})),n.column.extensions.edit&&n.table.extensions.edit.bindEditor(n),n.column.definition.rowHandle&&!1!==n.table.options.movableRows&&n.table.extExists("moveRow")&&n.table.extensions.moveRow.initializeCell(n),n.column.visible||n.hide()},Cell.prototype._generateContents=function(){var t=this;t.table.extExists("format")?t.element.html(t.table.extensions.format.formatValue(t)):t.element.html(t.value)},Cell.prototype._generateTooltip=function(){var t=this,e=t.column.tooltip;e?(!0===e?e=t.value:"function"==typeof e&&(e=e(t.getComponent())),t.element[0].setAttribute("title",e)):t.element[0].setAttribute("title","")},Cell.prototype.getElement=function(){return this.element},Cell.prototype.getValue=function(){return this.value},Cell.prototype.getOldValue=function(){return this.oldValue},Cell.prototype.setValue=function(t,e){this.setValueProcessData(t,e)&&(this.table.options.history&&this.table.extExists("history")&&this.table.extensions.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),this.table.options.cellEdited(this.getComponent()),this.table.options.dataEdited(this.table.rowManager.getData())),this.table.extExists("columnCalcs")&&this.table.extensions.columnCalcs.recalc(this.table.rowManager.displayRows)},Cell.prototype.setValueProcessData=function(t,e){var l=!1;return this.value!=t&&(l=!0,e&&this.column.extensions.mutate&&"data"!==this.column.extensions.mutate.type&&(t=this.table.extensions.mutator.transformCell(this,t))),this.setValueActual(t),l},Cell.prototype.setValueActual=function(t){this.oldValue=this.value,this.value=t,this.column.setFieldValue(this.row.data,t),this._generateContents(),this._generateTooltip(),this.table.options.resizableColumns&&this.table.extExists("resizeColumns")&&this.table.extensions.resizeColumns.initializeColumn("cell",this.column,this.element),this.table.extExists("frozenColumns")&&this.table.extensions.frozenColumns.layoutElement(this.element,this.column)},Cell.prototype.setWidth=function(t){this.width=t,this.element[0].style.width=t?t+"px":""},Cell.prototype.getWidth=function(){return this.width||this.element.outerWidth()},Cell.prototype.setMinWidth=function(t){this.minWidth=t,this.element[0].style.minWidth=t?t+"px":""},Cell.prototype.checkHeight=function(){this.element.css("height");this.row.reinitializeHeight()},Cell.prototype.clearHeight=function(){this.element[0].style.height=""},Cell.prototype.setHeight=function(t){this.height=t,this.element[0].style.height=t?t+"px":""},Cell.prototype.getHeight=function(){return this.height||this.element.outerHeight()},Cell.prototype.show=function(){this.element[0].style.display=""},Cell.prototype.hide=function(){this.element[0].style.display="none"},Cell.prototype.edit=function(){this.element.focus()},Cell.prototype.delete=function(){this.element.detach(),this.column.deleteCell(this),this.row.deleteCell(this)},Cell.prototype.nav=function(){var t=this,e=!1,l=this.row.getCellIndex(this);return{next:function(){var e,l=this.right();return!!l||!(!(e=t.table.rowManager.nextDisplayRow(t.row))||!(l=e.findNextEditableCell(-1)))&&(l.edit(),!0)},prev:function(){var e,l=this.left();return!!l||!(!(e=t.table.rowManager.prevDisplayRow(t.row))||!(l=e.findPrevEditableCell(e.cells.length)))&&(l.edit(),!0)},left:function(){return!!(e=t.row.findPrevEditableCell(l))&&(e.edit(),!0)},right:function(){return!!(e=t.row.findNextEditableCell(l))&&(e.edit(),!0)},up:function(){var e=t.table.rowManager.prevDisplayRow(t.row);e&&e.cells[l].edit()},down:function(){var e=t.table.rowManager.nextDisplayRow(t.row);e&&e.cells[l].edit()}}},Cell.prototype.getIndex=function(){this.row.getCellIndex(this)},Cell.prototype.getComponent=function(){return new CellComponent(this)};