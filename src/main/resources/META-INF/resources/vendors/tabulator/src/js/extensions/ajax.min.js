"use strict";var Ajax=function(t){this.table=t,this.config=!1,this.url="",this.params=!1,this.loaderElement=$("<div class='tablulator-loader'></div>"),this.msgElement=$("<div class='tabulator-loader-msg' role='alert'></div>"),this.loadingElement=!1,this.errorElement=!1};Ajax.prototype.initialize=function(){this.loaderElement.append(this.msgElement),this.table.options.ajaxLoaderLoading&&(this.loadingElement=this.table.options.ajaxLoaderLoading),this.table.options.ajaxLoaderError&&(this.errorElement=this.table.options.ajaxLoaderError),this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL)},Ajax.prototype.setParams=function(t,a){if(a){this.params=this.params||{};for(var e in t)this.params[e]=t[e]}else this.params=t},Ajax.prototype.getParams=function(){return this.params||{}},Ajax.prototype.setConfig=function(t){if(this._loadDefaultConfig(),"string"==typeof t)this.config.type=t;else for(var a in t)this.config[a]=t[a]},Ajax.prototype._loadDefaultConfig=function(t){var a=this;if(!a.config||t){a.config={};for(var e in a.defaultConfig)a.config[e]=a.defaultConfig[e]}},Ajax.prototype.setUrl=function(t){this.url=t},Ajax.prototype.getUrl=function(){return this.url},Ajax.prototype.sendRequest=function(t){var a=this;if(!a.url)return!1;a._loadDefaultConfig(),a.config.url=a.url,a.params&&(a.config.data=a.params),a.table.options.ajaxRequesting(a.url,a.params),a.showLoader(),$.ajax(a.config).done(function(e){a.table.options.ajaxResponse&&(e=a.table.options.ajaxResponse(a.url,a.params,e)),a.table.options.dataLoaded(e),t(e),a.hideLoader()}).fail(function(t,e,o){a.table.options.ajaxError(t,e,o),a.showError(),setTimeout(function(){a.hideLoader()},3e3)})},Ajax.prototype.showLoader=function(){this.loaderElement.detach(),this.msgElement.empty().removeClass("tabulator-error").addClass("tabulator-loading"),this.loadingElement?this.msgElement.append(this.loadingElement):this.msgElement.append(this.table.extensions.localize.getText("ajax.loading")),this.table.element.append(this.loaderElement)},Ajax.prototype.showError=function(){this.loaderElement.detach(),this.msgElement.empty().removeClass("tabulator-loading").addClass("tabulator-error"),this.errorElement?this.msgElement.append(this.errorElement):this.msgElement.append(this.table.extensions.localize.getText("ajax.error")),this.table.element.append(this.loaderElement)},Ajax.prototype.hideLoader=function(){this.loaderElement.detach()},Ajax.prototype.defaultConfig={url:"",type:"GET",async:!0,dataType:"json",success:function(t){}},Tabulator.registerExtension("ajax",Ajax);