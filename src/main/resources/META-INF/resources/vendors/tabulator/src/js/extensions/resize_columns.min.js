"use strict";var ResizeColumns=function(e){this.table=e,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null};ResizeColumns.prototype.initializeColumn=function(e,t,n){var s=this,o=!1,i=this.table.options.resizableColumns;if("header"===e&&(o="textarea"==t.definition.formatter||t.definition.variableHeight,t.extensions.resize={variableHeight:o}),!0===i||i==e){var a=document.createElement("div");a.className="tabulator-col-resize-handle";var l=document.createElement("div");l.className="tabulator-col-resize-handle prev",a.addEventListener("click",function(e){e.stopPropagation()}),a.addEventListener("mousedown",function(e){var n=t.getLastColumn();n&&(s.startColumn=t,s._mouseDown(e,n))}),l.addEventListener("click",function(e){e.stopPropagation()}),l.addEventListener("mousedown",function(e){var n,o,i;(n=t.getFirstColumn())&&(i=(o=s.table.columnManager.findColumnIndex(n))>0&&s.table.columnManager.getColumnByIndex(o-1))&&(s.startColumn=t,s._mouseDown(e,i))}),n.append(a).append(l)}},ResizeColumns.prototype._mouseDown=function(e,t){function n(e){t.setWidth(s.startWidth+(e.screenX-s.startX)),!s.table.browserSlow&&t.extensions.resize&&t.extensions.resize.variableHeight&&t.checkCellHeights()}var s=this;s.table.element.addClass("tabulator-block-select"),e.stopPropagation(),s.startColumn.extensions.edit&&(s.startColumn.extensions.edit.blocked=!0),s.startX=e.screenX,s.startWidth=t.getWidth(),$("body").on("mousemove",n),$("body").on("mouseup",function(e){s.startColumn.extensions.edit&&(s.startColumn.extensions.edit.blocked=!1),s.table.browserSlow&&t.extensions.resize&&t.extensions.resize.variableHeight&&t.checkCellHeights(),$("body").off("mouseup",n),$("body").off("mousemove",n),s.table.element.removeClass("tabulator-block-select"),s.table.options.persistentLayout&&s.table.extExists("persistentLayout",!0)&&s.table.extensions.persistentLayout.save(),s.table.options.columnResized(s.startColumn.getComponent())})},Tabulator.registerExtension("resizeColumns",ResizeColumns);