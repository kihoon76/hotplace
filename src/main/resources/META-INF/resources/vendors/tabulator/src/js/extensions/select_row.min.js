"use strict";var SelectRow=function(e){this.table=e,this.selecting=!1,this.selectPrev=[],this.selectedRows=[]};SelectRow.prototype.clearSelectionData=function(){this.selecting=!1,this.selectPrev=[],this.selectedRows=[]},SelectRow.prototype.initializeRow=function(e){var t=this,o=e.getElement(),s=function e(){setTimeout(function(){t.selecting=!1},50),$("body").off("mouseup",e)};e.extensions.select={selected:!1},t.table.options.selectableCheck(e.getComponent())?(o.addClass("tabulator-selectable").removeClass("tabulator-unselectable"),t.table.options.selectable&&"highlight"!=t.table.options.selectable&&(o.on("click",function(o){t.selecting||t.toggleRow(e)}),o.on("mousedown",function(o){if(o.shiftKey)return t.selecting=!0,t.selectPrev=[],$("body").on("mouseup",s),$("body").on("keyup",s),t.toggleRow(e),!1}),o.on("mouseenter",function(o){t.selecting&&(t.toggleRow(e),t.selectPrev[1]==e&&t.toggleRow(t.selectPrev[0]))}),o.on("mouseout",function(o){t.selecting&&t.selectPrev.unshift(e)}))):e.getElement().addClass("tabulator-unselectable").removeClass("tabulator-selectable")},SelectRow.prototype.toggleRow=function(e){this.table.options.selectableCheck(e.getComponent())&&(e.extensions.select.selected?this._deselectRow(e):this._selectRow(e))},SelectRow.prototype.selectRows=function(e){var t=this;void 0===e?(t.table.rowManager.rows.forEach(function(e){t._selectRow(e,!0,!0)}),t._rowSelectionChanged()):Array.isArray(e)?(e.forEach(function(e){t._selectRow(e,!0)}),t._rowSelectionChanged()):t._selectRow(e)},SelectRow.prototype._selectRow=function(e,t,o){l=this;if(!isNaN(l.table.options.selectable)&&!0!==l.table.options.selectable&&!o&&l.selectedRows.length>=l.table.options.selectable){if(!l.table.options.selectableRollingSelection)return!1;l._deselectRow(l.selectedRows[0],!0)}var s=l.table.rowManager.findRow(e);if(s){var l=this;s.extensions.select.selected=!0,s.getElement().addClass("tabulator-selected"),l.selectedRows.push(s),t||(l.table.options.rowSelected(s.getComponent()),l._rowSelectionChanged())}},SelectRow.prototype.deselectRows=function(e){var t=this;if(void 0===e){for(var o=t.selectedRows.length,s=0;s<o;s++)t._deselectRow(t.selectedRows[0],!0);t._rowSelectionChanged()}else Array.isArray(e)?(e.forEach(function(e){t._deselectRow(e,!0)}),t._rowSelectionChanged()):t._deselectRow(e)},SelectRow.prototype._deselectRow=function(e,t){var o,s=this,l=s.table.rowManager.findRow(e);l&&(o=s.selectedRows.findIndex(function(e){return e==l}))>-1&&(l.extensions.select.selected=!1,l.getElement().removeClass("tabulator-selected"),s.selectedRows.splice(o,1),t||(s.table.options.rowDeselected(l.getComponent()),s._rowSelectionChanged()))},SelectRow.prototype.getSelectedData=function(){var e=[];return this.selectedRows.forEach(function(t){e.push(t.getData())}),e},SelectRow.prototype.getSelectedRows=function(){var e=[];return this.selectedRows.forEach(function(t){e.push(t.getComponent())}),e},SelectRow.prototype._rowSelectionChanged=function(){this.table.options.rowSelectionChanged(this.getSelectedData(),this.getSelectedRows())},Tabulator.registerExtension("selectRow",SelectRow);