"use strict";var RowComponent=function(t){return{getData:function(){return t.getData(!0)},getElement:function(){return t.getElement()},getCells:function(){var e=[];return t.getCells().forEach(function(t){e.push(t.getComponent())}),e},getCell:function(e){return t.getCell(e).getComponent()},getIndex:function(){return t.getData(!0)[t.table.options.index]},delete:function(){t.delete()},scrollTo:function(){t.table.rowManager.scrollToRow(t)},update:function(e){t.updateData(e)},normalizeHeight:function(){t.normalizeHeight(!0)},select:function(){t.table.extensions.selectRow.selectRows(t)},deselect:function(){t.table.extensions.selectRow.deselectRows(t)},toggleSelect:function(){t.table.extensions.selectRow.toggleRow(t)},_getSelf:function(){return t}}},Row=function(t,e){this.table=e.table,this.parent=e,this.data={},this.type="row",this.element=$("<div class='tabulator-row' role='row'></div>"),this.extensions={},this.cells=[],this.height=0,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.setData(t),this.generateElement()};Row.prototype.getElement=function(){return this.element},Row.prototype.generateElement=function(){var t,e,o,n=this;!1!==n.table.options.selectable&&n.table.extExists("selectRow")&&n.table.extensions.selectRow.initializeRow(this),!1!==n.table.options.movableRows&&n.table.extExists("moveRow")&&n.table.extensions.moveRow.initializeRow(this),n.table.options.rowClick&&n.element.on("click",function(t){n.table.options.rowClick(t,n.getComponent())}),n.table.options.rowDblClick&&n.element.on("dblclick",function(t){n.table.options.rowDblClick(t,n.getComponent())}),n.table.options.rowContext&&n.element.on("contextmenu",function(t){n.table.options.rowContext(t,n.getComponent())}),n.table.options.rowTap&&(o=!1,n.element.on("touchstart",function(t){o=!0}),n.element.on("touchend",function(t){o&&n.table.options.rowTap(t,n.getComponent()),o=!1})),n.table.options.rowDblTap&&(t=null,n.element.on("touchend",function(e){t?(clearTimeout(t),t=null,n.table.options.rowDblTap(e,n.getComponent())):t=setTimeout(function(){clearTimeout(t),t=null},300)})),n.table.options.rowTapHold&&(e=null,n.element.on("touchstart",function(t){clearTimeout(e),e=setTimeout(function(){clearTimeout(e),e=null,o=!1,n.table.options.rowTapHold(t,n.getComponent())},1e3)}),n.element.on("touchend",function(t){clearTimeout(e),e=null}))},Row.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)},Row.prototype.initialize=function(t){var e=this;e.initialized&&!t||(e.deleteCells(),e.element.empty(),this.table.extExists("frozenColumns")&&this.table.extensions.frozenColumns.layoutRow(this),this.generateCells(),e.cells.forEach(function(t){e.element.append(t.getElement())}),t&&e.normalizeHeight(),e.table.options.rowFormatter&&e.table.options.rowFormatter(e.getComponent()),e.initialized=!0)},Row.prototype.reinitializeHeight=function(){this.heightInitialized=!1,null!==this.element[0].offsetParent&&this.normalizeHeight(!0)},Row.prototype.reinitialize=function(){this.initialized=!1,this.heightInitialized=!1,this.height=0,null!==this.element[0].offsetParent&&this.initialize(!0)},Row.prototype.calcHeight=function(){this.height=this.element[0].clientHeight,this.outerHeight=this.element[0].offsetHeight},Row.prototype.setCellHeight=function(){var t=this.height;this.cells.forEach(function(e){e.setHeight(t)}),this.heightInitialized=!0},Row.prototype.clearCellHeight=function(){this.cells.forEach(function(t){t.clearHeight()})},Row.prototype.normalizeHeight=function(t){t&&this.clearCellHeight(),this.calcHeight(),this.setCellHeight()},Row.prototype.setHeight=function(t,e){(this.height!=t||e)&&(this.height=t,this.setCellHeight(),this.outerHeight=this.element[0].offsetHeight)},Row.prototype.getHeight=function(){return this.outerHeight},Row.prototype.getWidth=function(){return this.element.outerWidth()},Row.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)},Row.prototype.setData=function(t){var e=this;e.table.extExists("mutator")?e.data=e.table.extensions.mutator.transformRow(t):e.data=t},Row.prototype.updateData=function(t){var e=this;e.table.extExists("mutator")&&(t=e.table.extensions.mutator.transformRow(t));for(var o in t)e.data[o]=t[o];for(var o in t){var n=this.getCell(o);n&&n.getValue()!=t[o]&&n.setValueProcessData(t[o])}this.element.is(":visible")?(e.normalizeHeight(),e.table.options.rowFormatter&&e.table.options.rowFormatter(e.getComponent())):(this.initialized=!1,this.height=0),e.table.options.rowUpdated(e.getComponent())},Row.prototype.getData=function(t){var e=this;return t?e.table.extExists("accessor")?e.table.extensions.accessor.transformRow(e.data):void 0:this.data},Row.prototype.getCell=function(t){var t=this.table.columnManager.findColumn(t);return this.cells.find(function(e){return e.column===t})},Row.prototype.getCellIndex=function(t){return this.cells.findIndex(function(e){return e===t})},Row.prototype.findNextEditableCell=function(t){var e=!1;if(t<this.cells.length-1)for(var o=t+1;o<this.cells.length;o++){var n=this.cells[o];if(n.column.extensions.edit&&n.getElement().is(":visible")){var i=!0;if("function"==typeof n.column.extensions.edit.check&&(i=n.column.extensions.edit.check(n.getComponent())),i){e=n;break}}}return e},Row.prototype.findPrevEditableCell=function(t){var e=!1;if(t>0)for(var o=t-1;o>=0;o--){var n=this.cells[o],i=!0;if(n.column.extensions.edit&&n.getElement().is(":visible")&&("function"==typeof n.column.extensions.edit.check&&(i=n.column.extensions.edit.check(n.getComponent())),i)){e=n;break}}return e},Row.prototype.getCells=function(){return this.cells},Row.prototype.delete=function(){var t=this.table.rowManager.getRowIndex(this);this.deleteActual(),this.table.options.history&&this.table.extExists("history")&&(t&&(t=this.table.rowManager.rows[t-1]),this.table.extensions.history.action("rowDelete",this,{data:this.getData(),pos:!t,index:t}))},Row.prototype.deleteActual=function(){this.table.rowManager.deleteRow(this),this.deleteCells()},Row.prototype.deleteCells=function(){for(var t=this.cells.length,e=0;e<t;e++)this.cells[0].delete()},Row.prototype.getComponent=function(){return new RowComponent(this)};